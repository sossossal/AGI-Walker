# GUI配置器快速测试指南

## 测试内容

本指南帮助您快速测试GUI配置器的各项功能。

---

## 🧪 测试1: 基础功能

### 启动GUI
```bash
cd d:\新建文件夹\AGI-Walker
python tools\robot_configurator_gui.py
```

### 测试步骤
1. ✅ GUI窗口正常打开
2. ✅ 左侧零件库显示电机、传感器、控制器
3. ✅ 中间画布显示网格
4. ✅ 右侧属性面板显示提示
5. ✅ 底部反馈面板显示连接选项

---

## 🧪 测试2: 零件操作

### 拖拽添加
1. 从零件库拖拽"Dynamixel XL430"到画布
2. 松开鼠标，零件出现

### 双击添加
1. 双击"MPU6050"
2. 零件出现在画布中心

### 选择和移动
1. 点击画布上的零件（边框变红）
2. 拖动零件到新位置
3. 右侧显示零件属性

### 删除零件
1. 选中零件
2. 点击"🗑️ 删除"按钮
3. 零件消失

---

## 🧪 测试3: 零件连接

### 创建连接
1. 添加2个零件到画布
2. 点击"🔗 连接模式"（按钮凹陷）
3. 依次点击两个零件
4. 出现蓝色箭头连接线

### 拖动时连线跟随
1. 选择已连接的零件
2. 拖动零件
3. 连接线自动更新位置

---

## 🧪 测试4: 配置保存/加载

### 保存
1. 在画布上组装几个零件并连接
2. 菜单: 文件 → 保存配置
3. 选择位置，保存为`test_robot.json`

### 加载
1. 菜单: 文件 → 打开配置
2. 选择刚才保存的文件
3. 零件和连接自动恢复

### 查看JSON
```bash
notepad test_robot.json
```
验证内容包含parts和connections

---

## 🧪 测试5: 模拟仿真

### 启动模拟
1. 在底部选择Radio: "模拟"
2. 点击"▶️ 启动仿真"
3. 观察：
   - 状态变为"运行中"（绿色）
   - 位置/速度/电量数据实时更新
   - 图表显示位置曲线（绿色线）

### 停止
1. 点击"⏹️ 停止"
2. 状态变为"已停止"（红色）
3. 数据停止更新

---

## 🧪 测试6: Godot连接（需要Godot服务器）

### 方案A: 使用模拟服务器

```bash
# 终端1：启动模拟Godot服务器
python -c "from python_api.godot_client import MockGodotServer; import time; s=MockGodotServer(); s.start(); time.sleep(999)"

# 终端2：启动GUI
python tools\robot_configurator_gui.py
```

### 方案B: 使用真实Godot

1. 打开Godot项目: `godot_project/project.godot`
2. 添加 `TCPSimulationServer.gd` 到主场景
3. 运行Godot项目
4. 启动GUI

### 连接测试

1. 在GUI底部输入:
   - 地址: `127.0.0.1`
   - 端口: `9999`
2. 点击"🔌 连接"
3. 等待2-3秒
4. 检查：
   - 连接状态变为"● 已连接"（绿色）
   - 按钮变为"🔌 断开"
   - "▶️ 启动仿真"按钮可用

### 启动Godot仿真

1. 确保连接成功
2. 选择Radio: "Godot"
3. 点击"▶️ 启动仿真"
4. 观察：
   - 状态: "Godot仿真中"
   - 图表显示"实时数据（Godot）"
   - 蓝色曲线显示位置

### 参数同步

1. 在仿真运行时
2. 点击"🔄 同步参数"
3. 状态显示"参数已同步"

---

## ✅ 功能检查清单

### 基础功能
- [  ] GUI启动正常
- [  ] 所有面板显示
- [  ] 菜单可访问

### 零件操作
- [  ] 拖拽添加零件
- [  ] 双击添加零件
- [  ] 按钮添加零件
- [  ] 选择零件（红色高亮）
- [  ] 移动零件
- [  ] 删除零件
- [  ] 清空画布

### 连接功能
- [  ] 连接模式切换
- [  ] 创建连接线
- [  ] 拖动时连线跟随
- [  ] 删除零件时连线消失

### 配置管理
- [  ] 保存配置到JSON
- [  ] 加载配置
- [  ] 新建配置（清空）

### 属性编辑
- [  ] 选中零件显示属性
- [  ] 参数滑块可调
- [  ] 数值输入框可编辑

### 模拟仿真
- [  ] 启动模拟
- [  ] 数据实时更新
- [  ] 图表绘制
- [  ] 停止仿真

### Godot集成
- [  ] 连接到服务器
- [  ] 连接状态显示
- [  ] 启动Godot仿真
- [  ] 接收实时数据
- [  ] 图表更新
- [  ] 参数同步
- [  ] 断开连接

---

## 🐛 常见问题

### GUI无法启动
```
ImportError: No module named 'matplotlib'
```
**解决**: `pip install matplotlib pillow`

### 连接Godot失败
**检查**:
1. Godot是否运行？
2. TCP服务器是否启动？
3. 端口9999是否被占用？

### 数据不更新
**模拟模式**: 检查是否选择了"模拟"选项
**Godot模式**: 检查连接状态和Godot是否在发送数据

### 图表显示异常
**重启**: 关闭并重新打开GUI

---

## 📝 测试报告模板

```
测试日期: ____
测试人: ____
GUI版本: 1.0

基础功能: ✅/❌
零件操作: ✅/❌
连接功能: ✅/❌
配置管理: ✅/❌
模拟仿真: ✅/❌
Godot集成: ✅/❌

发现问题:
1. ____
2. ____

建议改进:
1. ____
2. ____
```

---

**测试完成后**: 请更新 `task.md` 中的测试状态
