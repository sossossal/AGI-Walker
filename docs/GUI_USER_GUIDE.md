# AGI-Walker GUI 配置器 - 使用指南

## 🎯 快速开始

### 安装依赖
```bash
cd d:\新建文件夹\AGI-Walker
pip install matplotlib pillow
```

### 启动应用
```bash
python tools\robot_configurator_gui.py
```

---

## 📖 功能说明

### 1. 零件库面板（左侧）

#### 浏览零件
- 展开分类树查看不同类型的零件（电机、传感器、控制器等）
- 点击零件显示详细信息

#### 添加零件
**方法一：拖拽**
1. 在零件库中按住鼠标左键
2. 拖动到中间画布
3. 松开鼠标，零件自动添加

**方法二：点击按钮**
1. 在树中选择一个零件
2. 点击"➕ 添加到画布"按钮

**方法三：双击**
- 直接双击零件名称，自动添加到画布中心

#### 查看详情
1. 选择一个零件
2. 点击"🔍 查看详情"按钮
3. 弹出窗口显示完整的零件规格

---

### 2. 组装画布（中间）

#### 移动零件
1. 点击选中一个零件（边框变红）
2. 按住鼠标拖动
3. 松开鼠标固定位置

#### 连接零件
1. 点击工具栏的"🔗 连接模式"按钮
2. 点击第一个零件作为起点
3. 点击第二个零件作为终点
4. 自动绘制蓝色箭头连接线
5. 再次点击"🔗 连接模式"退出

#### 删除零件
1. 点击选中要删除的零件
2. 点击工具栏的"🗑️ 删除"按钮
3. 零件及其所有连接线被清除

#### 其他功能
- **清空画布**: 点击"🧹 清空"删除所有零件
- **显示/隐藏网格**: 点击"📐 网格"切换背景网格

---

### 3. 属性编辑器（右侧）

#### 编辑参数
1. 在画布中选择一个零件
2. 右侧自动显示该零件的参数
3. 使用滑块或输入框调整数值
   - 功率倍增: 0.5 - 2.0
   - 刚度: 0.5 - 3.0
   - 阻尼: 0.1 - 1.0
4. 点击"✓ 应用更改"保存参数

---

### 4. 仿真反馈（底部）

#### 启动仿真
1. 配置好机器人后，点击"▶️ 启动仿真"
2. 观察实时数据更新
   - 位置 (m)
   - 速度 (m/s)
   - 电量 (%)
3. 查看实时曲线图

#### 停止仿真
- 点击"⏹️ 停止"按钮暂停仿真

---

## 💾 配置管理

### 保存配置
1. 菜单: 文件 → 保存配置
2. 选择保存位置和文件名
3. 配置以JSON格式保存，包含：
   - 所有零件及其位置
   - 零件之间的连接关系

### 加载配置
1. 菜单: 文件 → 打开配置...
2. 选择之前保存的JSON文件
3. 自动恢复零件和连接

### 示例配置文件
```json
{
  "robot_name": "我的机器人",
  "version": "1.0",
  "parts": [
    {
      "id": "motor_1_0",
      "part_id": "motor_1",
      "model": "Dynamixel XL430",
      "position": [200, 150]
    }
  ],
  "connections": [
    {
      "from": "motor_1_0",
      "to": "ctrl_1_1"
    }
  ]
}
```

---

## ⌨️ 快捷操作

### 零件库
- **双击零件**: 添加到画布
- **拖拽零件**: 拖到画布指定位置

### 画布
- **单击零件**: 选中
- **拖动零件**: 移动位置
- **单击空白**: 取消选中

### 菜单
- **Ctrl+N**: 新建配置（开发中）
- **Ctrl+S**: 保存配置（开发中）
- **Ctrl+O**: 打开配置（开发中）

---

## 🎨 界面元素说明

### 颜色代码
- **浅蓝色方框**: 未选中的零件
- **红色边框**: 选中的零件
- **蓝色箭头**: 零件间的连接
- **灰色网格**: 背景参考线

### 状态栏
- 显示当前鼠标位置
- 显示最近的操作结果
- 连接模式状态提示

---

## 🚀 典型工作流程

### 从零开始组装机器人

1. **启动应用**
   ```bash
   python tools\robot_configurator_gui.py
   ```

2. **添加控制器**
   - 从左侧找到"控制器" → "Raspberry Pi 4"
   - 双击或拖拽到画布中心

3. **添加电机**
   - 找到"电机" → "Dynamixel XL430"
   - 拖拽到控制器下方
   - 重复添加更多电机

4. **建立连接**
   - 点击"🔗 连接模式"
   - 点击控制器
   - 依次点击每个电机
   - 形成控制关系

5. **调整参数**
   - 选中电机
   - 在右侧调整功率和刚度
   - 点击"应用更改"

6. **测试仿真**
   - 点击"▶️ 启动仿真"
   - 观察数据反馈

7. **保存配置**
   - 文件 → 保存配置
   - 输入文件名 `my_robot.json`

---

## ❓ 常见问题

### Q: 如何删除连接线？
A: 删除其中一个零件，相关的连接会自动删除。

### Q: 零件太多找不到了？
A: 使用左上角的搜索框（功能开发中）。

### Q: 参数调整没反应？
A: 确保点击了"✓ 应用更改"按钮。

### Q: 仿真数据是真实的吗？
A: 目前是模拟数据，后续版本将连接真实的物理引擎。

---

## 🔧 高级功能（计划中）

- [ ] 参数实时同步到仿真
- [ ] 3D预览
- [ ] 撤销/重做
- [ ] 零件搜索
- [ ] 多机器人管理
- [ ] 动画回放
- [ ] 导出为Godot项目

---

**版本**: v1.0  
**最后更新**: 2026-01-18
